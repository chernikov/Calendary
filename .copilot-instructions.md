# GitHub Copilot - Інструкції для роботи з Calendary

## Про проект

Calendary - сервіс створення персоналізованих календарів з AI-згенерованими зображеннями.
- Backend: ASP.NET Core 9.0
- Frontend: Angular 20
- AI: Replicate API (Flux LoRA)
- БД: MS SQL Server + EF Core

**Головна документація**: `claude.md`
**Технічні задачі**: `TASKS.md`
**AI-Driven Architecture**: `FRAME.md`

---

## Як використовувати Copilot для цього проекту

### 1. Autocomplete при написанні коду

Copilot найкраще працює для:
- Написання стандартних CRUD методів
- Генерація DTOs та mapping
- Написання простих validators
- Створення Angular components/services
- Написання SQL queries

**Приклад використання**:
```csharp
// Напишіть коментар і Copilot згенерує код:

// Create a method to get all orders for a specific user
// Copilot запропонує щось на кшталт:
public async Task<List<Order>> GetOrdersByUserIdAsync(int userId)
{
    return await _context.Orders
        .Where(o => o.UserId == userId)
        .Include(o => o.OrderItems)
        .ToListAsync();
}
```

### 2. Генерація Unit тестів

Copilot чудово генерує тести:

**Як використовувати**:
1. Відкрийте файл сервісу (наприклад, `ReplicateService.cs`)
2. Створіть новий файл `ReplicateServiceTests.cs`
3. Напишіть коментар: `// Test for CreateModelAsync method`
4. Copilot згенерує тест

**Приклад**:
```csharp
// Test for CreateModelAsync with valid model name
[Fact]
public async Task CreateModelAsync_ValidModelName_ReturnsModel()
{
    // Arrange
    var mockHttp = new Mock<HttpClient>();
    var service = new ReplicateService(mockHttp.Object);

    // Act
    var result = await service.CreateModelAsync("test_model", "description");

    // Assert
    Assert.NotNull(result);
    Assert.Equal("test_model", result.Name);
}
```

### 3. Рефакторинг коду

Copilot може допомогти з рефакторингом:

**Як використовувати**:
1. Виділіть блок коду
2. Натисніть `Ctrl+I` (inline chat)
3. Напишіть: "Refactor this to use async/await" або "Extract this to a separate method"

### 4. Створення Angular компонентів

**Приклад**:
```typescript
// Component для відображення списку замовлень з пагінацією та фільтрацією
// Copilot згенерує компонент з:
// - Input параметрами
// - Output events
// - Методами для пагінації
// - Template з Material Design таблицею
```

---

## Обмеження Copilot

### Що Copilot НЕ зробить добре:

1. **Складна бізнес-логіка** - потребує детального контексту
2. **Архітектурні рішення** - не бачить всю систему
3. **Debugging складних проблем** - обмежений контекст
4. **Integration testing** - потребує запуску сервісів

### Коли використовувати Claude замість Copilot:

- Розбір складних багів (використайте Claude для аналізу логів)
- Архітектурні зміни (створення нових модулів)
- Рефакторинг великих частин коду
- Написання документації

---

## Типові задачі для Copilot

### ✅ Добре підходить:

1. **Створення DTOs**
   ```csharp
   // DTO for creating a new calendar
   // Copilot згенерує всі потрібні поля
   ```

2. **Mapping між моделями**
   ```csharp
   // Map Calendar entity to CalendarDto
   // Copilot згенерує AutoMapper profile
   ```

3. **Validators**
   ```csharp
   // FluentValidation validator for CreateOrderRequest
   // Copilot додасть валідації для всіх полів
   ```

4. **API Controllers**
   ```csharp
   // REST API controller for managing calendars
   // Copilot створить CRUD endpoints
   ```

5. **Angular Services**
   ```typescript
   // Service for managing user authentication with JWT
   // Copilot створить методи login, logout, refresh token
   ```

### ❌ Погано підходить:

1. **Replicate API integration** - специфічна логіка
2. **PDF generation** - складна бізнес-логіка
3. **WebHook обробка** - потребує розуміння зовнішніх систем
4. **Performance optimization** - потребує профілювання

---

## Корисні промпти для Copilot Chat

### Backend (C#)

```
Створи Repository для Order entity з методами:
- GetById
- GetByUserId
- Create
- Update
- Delete
Використовуй EF Core та async/await
```

```
Додай до OrderService метод для розрахунку загальної вартості замовлення
з урахуванням доставки Новою Поштою
```

```
Створи FluentValidation валідатор для CreateCalendarRequest
Перевір: userId not empty, 12 зображень, дати валідні
```

### Frontend (Angular)

```
Створи компонент для відображення календаря з можливістю редагування дат
Використовуй Angular Material DatePicker
```

```
Створи сервіс для роботи з API замовлень
Методи: getAll, getById, create, update, delete
Додай обробку помилок та loading states
```

```
Створи guard для перевірки ролі admin
Редірект на /login якщо не авторизований
```

### Tests

```
Створи unit тести для CalendarService
Протестуй методи: Create, Update, Delete, GetById
Використовуй Moq для мокування репозиторіїв
```

---

## Workflow для роботи з задачами

### Крок 1: Читання задачі
Відкрийте `TASKS.md`, оберіть задачу

### Крок 2: Підготовка
```bash
git checkout -b feature/task-name
```

### Крок 3: Використання Copilot
- Для простих методів: пишіть коментарі, Copilot генерує код
- Для компонентів: використовуйте Copilot Chat
- Для тестів: згенеруйте через Copilot

### Крок 4: Перевірка
- Запустіть код локально
- Перевірте чек-лист з `TASKS.md`

### Крок 5: Commit
```bash
git add .
git commit -m "feat: add feature description"
git push origin feature/task-name
```

### Крок 6: Перемикання на Claude для складного
Якщо застрягли - скопіюйте задачу в Claude Code

---

## Налаштування Copilot для цього проекту

### В VS Code Settings (`.vscode/settings.json`):

```json
{
  "github.copilot.enable": {
    "*": true,
    "csharp": true,
    "typescript": true,
    "markdown": true
  },
  "github.copilot.advanced": {
    "debug.overrideEngine": "gpt-4",
    "inlineSuggestCount": 3
  }
}
```

### Корисні extensions:
- GitHub Copilot
- GitHub Copilot Chat
- C# Dev Kit (для .NET)
- Angular Language Service

---

## Приклади конкретних задач

### Задача: Додати новий endpoint для експорту замовлень в CSV

**Крок 1**: В `OrderController.cs` напишіть:
```csharp
// Export orders to CSV file
```

**Copilot згенерує**:
```csharp
[HttpGet("export")]
public async Task<IActionResult> ExportToCsv()
{
    var orders = await _orderService.GetAllAsync();
    var csv = ConvertToCsv(orders);
    return File(Encoding.UTF8.GetBytes(csv), "text/csv", "orders.csv");
}
```

**Крок 2**: Додайте метод конвертації:
```csharp
// Convert list of orders to CSV string
```

**Copilot згенерує** метод `ConvertToCsv`

---

### Задача: Створити компонент для вибору промпт теми

**Крок 1**: Створіть файл `prompt-theme-selector.component.ts`

**Крок 2**: Напишіть:
```typescript
// Component for selecting prompt theme from dropdown
// Load themes from API
// Emit selected theme to parent
```

**Copilot згенерує** повний компонент з:
- `@Input()` для preselected theme
- `@Output()` для themeSelected event
- Методом `loadThemes()`
- Template з Material Select

---

## Поради для ефективної роботи

### 1. Пишіть деталізовані коментарі
❌ Погано: `// Get orders`
✅ Добре: `// Get all orders for user with pagination, sorted by created date descending`

### 2. Використовуйте Copilot Labs
- Explain code - пояснює складний код
- Translate - перекладає між мовами
- Test generation - генерує тести

### 3. Перевіряйте згенерований код
Copilot може:
- Використовувати застарілі API
- Пропускати обробку помилок
- Генерувати небезпечний код (SQL injection)

### 4. Навчайте Copilot
Copilot вчиться на вашому коді. Якщо ви пишете багато async/await методів, він краще генеруватиме їх

---

## Troubleshooting

### Copilot не генерує релевантні пропозиції
- Перевірте що файл збережений
- Додайте більше контексту в коментарі
- Відкрийте пов'язані файли (Copilot бачить відкриті вкладки)

### Copilot генерує застарілий код
- Вкажіть версію явно: `// Using .NET 9 and EF Core 9`
- Додайте приклад сучасного синтаксису в коментарі

### Copilot не розуміє специфіку проекту
- Відкрийте `claude.md` в редакторі
- Copilot побачить контекст проекту

---

## Коли переходити на інших AI помічників

### Використовуйте Claude Code коли:
- Задача складніша ніж "написати метод"
- Потрібен аналіз всієї системи
- Debugging складної проблеми
- Архітектурні зміни

### Використовуйте Gemini коли:
- Потрібен multimodal аналіз (зображення + код)
- Робота з великим контекстом (>10 файлів)
- Дослідження нових технологій

### Використовуйте Codex (ChatGPT) коли:
- Потрібна швидка порада
- Пояснення концепції
- Генерація прикладів коду

---

**Останнє оновлення**: 2025-11-15
**Для питань**: Див. `claude.md` або `TASKS.md`
