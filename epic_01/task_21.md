# Task 21: Створення системи пресетів свят

**Epic**: [Epic 01 - Перший реліз](../epic_01.md)
**Статус**: TODO
**Пріоритет**: P1 (Високий)
**Складність**: Середня
**Час**: 3-4 години
**Відповідальний AI**: Claude

## Опис задачі

Створити систему пресетів свят - це набори вже налаштованих свят для різних регіонів та культур (державні, релігійні, регіональні).

## Що треба зробити

1. **HolidayPreset entity** (або використати існуючу Country):
   - Name (назва набору свят, наприклад "Українські державні свята")
   - Code (код, наприклад "UA_STATE", "PL_STATE", "UA_CHURCH")
   - Type (державні, церковні, регіональні)
   - Description
   - Holidays (список свят з датами)

2. **Seed Data для пресетів**:
   
   **Локалізація: українська (UA) + англійська (EN)**
   
   - **Українські державні свята (UA_STATE)**:
     * 1 січня - Новий рік / New Year's Day
     * 7 січня - Різдво Христове / Christmas (Orthodox)
     * 8 березня - Міжнародний жіночий день / International Women's Day
     * 1 травня - День праці / Labour Day
     * 9 травня - День перемоги над націзмом / Victory Day over Nazism
     * 28 червня - День Конституції України / Constitution Day of Ukraine
     * 24 серпня - День Незалежності України / Independence Day of Ukraine
     * 14 жовтня - День захисника України / Defender of Ukraine Day
     * 25 грудня - Різдво Христове (григоріанське) / Christmas (Catholic)
   
   - **США державні свята (US_STATE)**:
     * 1 січня - New Year's Day / Новий рік
     * Третій понеділок січня - Martin Luther King Jr. Day / День Мартіна Лютера Кінга
     * Третій понеділок лютого - Presidents' Day / День президентів
     * Останній понеділок травня - Memorial Day / День пам'яті
     * 4 липня - Independence Day / День незалежності США
     * Перший понеділок вересня - Labor Day / День праці
     * Другий понеділок жовтня - Columbus Day / День Колумба
     * 11 листопада - Veterans Day / День ветеранів
     * Четвертий четвер листопада - Thanksgiving Day / День подяки
     * 25 грудня - Christmas Day / Різдво
   
   - **Великобританія (UK_STATE)**:
     * 1 січня - New Year's Day / Новий рік
     * Страсна п'ятниця - Good Friday / Страсна п'ятниця (рухоме)
     * Великодній понеділок - Easter Monday / Великодній понеділок (рухоме)
     * Перший понеділок травня - Early May Bank Holiday
     * Останній понеділок травня - Spring Bank Holiday
     * Останній понеділок серпня - Summer Bank Holiday
     * 25 грудня - Christmas Day / Різдво
     * 26 грудня - Boxing Day / День подарунків
   
   - **Церковні православні (ORTHODOX)**:
     * 7 січня - Різдво Христове / Christmas (Orthodox)
     * 19 січня - Водохреще / Epiphany
     * Великдень - Easter / Великдень (рухоме свято)
     * 40-й день після Великодня - Вознесіння Господнє / Ascension
     * 50-й день після Великодня - Трійця / Trinity Sunday
     * 28 серпня - Успіння Пресвятої Богородиці / Dormition
     * 19 грудня - День Святого Миколая / St. Nicholas Day
   
   - **Церковні католицькі (CATHOLIC)**:
     * 1 січня - Новий рік / New Year's Day
     * 6 січня - Богоявлення / Epiphany
     * Попільна середа - Ash Wednesday / Попільна середа (рухоме)
     * Великдень - Easter Sunday / Великдень (рухоме, за григоріанським календарем)
     * Вознесіння - Ascension / Вознесіння (40-й день після Великодня)
     * П'ятдесятниця - Pentecost / П'ятдесятниця (50-й день)
     * 15 серпня - Внебовзяття Діви Марії / Assumption of Mary
     * 1 листопада - День всіх святих / All Saints' Day
     * 25 грудня - Різдво / Christmas Day
   
   - **Єврейські свята (JEWISH)**:
     * Рош га-Шана - Rosh Hashanah / Єврейський Новий рік (рухоме, вересень-жовтень)
     * Йом Кіпур - Yom Kippur / День спокути (рухоме)
     * Суккот - Sukkot / Свято Кущів (рухоме)
     * Ханука - Hanukkah / Ханука (рухоме, грудень)
     * Пурим - Purim / Пурим (рухоме, лютий-березень)
     * Песах - Passover / Песах (рухоме, березень-квітень)
     * Шавуот - Shavuot / Шавуот (рухоме, травень-червень)
   
   - **Мусульманські свята (ISLAMIC)**:
     * Рамадан - Ramadan / Рамадан (рухоме, місячний календар)
     * Ід аль-Фітр - Eid al-Fitr / Свято розговіння (рухоме)
     * Ід аль-Адха - Eid al-Adha / Свято жертвопринесення (рухоме)
     * Мавлід - Mawlid / День народження Пророка (рухоме)
     * Ісра і Мірадж - Isra and Mi'raj / Нічна подорож (рухоме)

3. **Backend API**:
   - `GET /api/holiday-presets` - список доступних пресетів свят
   - `GET /api/holiday-presets/{code}` - деталі пресету з датами свят
   - `POST /api/calendars/{id}/apply-preset/{code}` - застосувати пресет до календаря

4. **Database Seeder**:
   - Створити міграцію з seed даними для пресетів
   - Підтримка двомовної локалізації назв свят (UA, EN)
   - Окремі записи для кожної локалізації або JSON поля з перекладами
   - Розрахунок рухомих свят (Easter calculator для різних календарів)

5. **Додаткові можливості пресетів**:
   - **Комбіновані пресети**: можливість об'єднати кілька пресетів (наприклад, UA_STATE + ORTHODOX)
   - **Регіональні варіації**: 
     * Західна Україна (католицькі + православні свята)
     * Східна Україна (тільки православні)
     * Мультикультурні календарі (всі релігії)
   - **Корпоративні пресети**: можливість додавати корпоративні свята/події
   - **Персональні події**: дні народження, річниці тощо
   - **Міжнародні свята**: День Святого Валентина, Хелловін, День матері тощо

## Файли для створення/модифікації

- `src/Calendary.Model/HolidayPreset.cs` (або розширити існуючу Country)
- `src/Calendary.Repos/Data/HolidayPresetSeeder.cs`
- `src/Calendary.Core/Services/HolidayPresetService.cs`
- `src/Calendary.Api/Controllers/HolidayPresetController.cs`
- Міграція для seed даних

## Що тестувати

- [ ] Пресети свят зберігаються в БД через seed
- [ ] API повертає список доступних пресетів
- [ ] API повертає свята для конкретного пресету
- [ ] Застосування пресету додає свята до календаря
- [ ] Локалізація назв свят працює (UA/EN)
- [ ] Рухомі свята (Великдень, Трійця, Рамадан тощо) розраховуються правильно
- [ ] Можливість комбінувати кілька пресетів
- [ ] Фільтрація пресетів за типом (державні, релігійні)
- [ ] Підтримка різних календарних систем (григоріанський, юліанський, місячний)

## Технічні нотатки

**Локалізація на рівні даних:**
- Кожен пресет має переклади для UA та EN
- Структура БД може бути:
  ```
  HolidayPreset: Id, Code, Type
  HolidayPresetTranslation: PresetId, LanguageCode, Name, Description
  Holiday: Id, PresetId, Month, Day, IsMovable
  HolidayTranslation: HolidayId, LanguageCode, Name
  ```
- Для рухомих свят: алгоритми розрахунку Easter (Computus) для православного та католицького календарів
- Для місячних календарів (Ісламський, Єврейський): використання спеціалізованих бібліотек

**Приклади пресетів:**
1. `UA_STATE` - Українські державні (9 свят)
2. `US_STATE` - США державні (10 свят)
3. `UK_STATE` - Великобританія (8 свят)
4. `ORTHODOX` - Православні церковні (7+ свят)
5. `CATHOLIC` - Католицькі церковні (9+ свят)
6. `JEWISH` - Єврейські (7 основних свят)
7. `ISLAMIC` - Мусульманські (5 основних свят)
8. `INTERNATIONAL` - Міжнародні свята (День Святого Валентина, День матері тощо)

---

**Створено**: 2025-11-15
**Оновлено**: 2025-11-16
