<h3>Flux моделі</h3>
<table mat-table [dataSource]="fluxModels" class="mat-elevation-z8 flux-model-table">
    <!-- Колонка ID -->
    <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> ID </th>
        <td mat-cell *matCellDef="let model"> {{ model.id }} </td>
    </ng-container>

    <!-- Колонка Назва -->
    <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Назва </th>
        <td mat-cell *matCellDef="let model"> {{ model.name }} </td>
    </ng-container>

    <!-- Колонка Статус -->
    <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef> Статус </th>
        <td mat-cell *matCellDef="let model"> {{ model.status }} </td>
    </ng-container>

    <!-- Колонка Архів -->
    <ng-container matColumnDef="archive">
        <th mat-header-cell *matHeaderCellDef> Архів </th>
        <td mat-cell *matCellDef="let model">
            <ng-container *ngIf="model.archiveUrl; else noArchive">
                <a mat-raised-button color="primary" [href]="model.archiveUrl" download>
                    Скачати фото
                </a>
            </ng-container>
            <ng-template #noArchive>
                <span>Немає архіву</span>
            </ng-template>
        </td>
    </ng-container>

    <!-- Колонка Тренування -->
    <ng-container matColumnDef="trainings">
        <th mat-header-cell *matHeaderCellDef> Тренування </th>
        <td mat-cell *matCellDef="let model">
            <ng-container *ngIf="getTrainingInfo(model) as training; else noTraining">
                <div class="training-info">
                    <div><strong>ID:</strong> {{ training.id }}</div>
                    <div><strong>ReplicateId:</strong> {{ training.replicateId }}</div>
                    <div><strong>Status:</strong> {{ training.status }}</div>
                    <button mat-icon-button color="warn"
                        (click)="deleteTraining(training.id); $event.stopPropagation()">
                        <mat-icon>delete</mat-icon>
                    </button>
                </div>
            </ng-container>
            <ng-template #noTraining>
                <span>Немає тренувань</span>
            </ng-template>
        </td>
    </ng-container>

    <!-- Колонка Створено -->
    <ng-container matColumnDef="createdAt">
        <th mat-header-cell *matHeaderCellDef> Створено </th>
        <td mat-cell *matCellDef="let model"> {{ model.createdAt | date:'short' }} </td>
    </ng-container>

    <!-- Колонка Дій (для видалення flux моделі) -->
    <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef> Дії </th>
        <td mat-cell *matCellDef="let model">
            <button mat-icon-button color="warn" (click)="deleteFluxModel(model.id); $event.stopPropagation()">
                <mat-icon>delete</mat-icon>
            </button>
        </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>